@using FlowerMall.Models;
@model tb_GoodsInfo

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>修改商品</title>
    <link href="~/Content/bs4.pop.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/umd/popper.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/bs4.pop.js"></script>
    <link href="~/Content/FlowerBack/animate.css" rel="stylesheet" />
    <link href="~/Content/FlowerBack/app-style.css" rel="stylesheet" />
    <link href="~/Content/FlowerBack/icons.css" rel="stylesheet" />
    <link href="~/Content/FlowerBack/pace.min.css" rel="stylesheet" />
    <link href="~/Content/FlowerBack/sidebar-menu.css" rel="stylesheet" />
    <style>
        #image-holder {
            width: 100%;
            max-height: 500px;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 10px;
            overflow: auto;
            text-align: center;
        }

            #image-holder img {
                max-width: 100%;
            }
    </style>
</head>
<body class="bg-theme bg-theme1">

    <!-- start loader -->
    <div id="pageloader-overlay" class="visible incoming"><div class="loader-wrapper-outer"><div class="loader-wrapper-inner"><div class="loader"></div></div></div></div>
    <!-- end loader -->
    <!-- Start wrapper-->
    <div id="wrapper">

        <!--Start sidebar-wrapper-->
        <div id="sidebar-wrapper" data-simplebar="" data-simplebar-auto-hide="true">
            <div class="brand-logo">
                <a href="~/flowerui/index" target="_blank">
                    <img src="~/Images/花语logo.png" class="" />
                </a>
            </div>

            <ul class="sidebar-menu do-nicescrol">
                <li class="sidebar-header">花语馨苑后台管理界面</li>
                <li>
                    <a href="~/flowerback/main">
                        <i class="zmdi zmdi-view-dashboard"></i> <span>后台首页</span>
                    </a>
                </li>

                <li>
                    <a href="~/flowerback/goodinfo">
                        <i class="zmdi zmdi-book-image"></i> <span>商品管理</span>
                    </a>
                </li>

                <li>
                    <a href="~/flowerback/goodadd">
                        <i class="zmdi zmdi-assignment-o"></i> <span>上架商品</span>
                    </a>
                </li>

                <li class="active">
                    <a href="#">
                        <i class="zmdi zmdi-grid"></i> <span>修改商品</span>
                    </a>
                </li>

                <li>
                    <a href="~/flowerback/orderinfo">
                        <i class="zmdi zmdi-calendar-check"></i> <span>订单管理</span>
                        <small class="badge float-right badge-light">New</small>
                    </a>
                </li>

                <li>
                    <a href="javaScript:alert('请通过[订单管理]页面来修改商品');">
                        <i class="zmdi zmdi-assignment-check"></i> <span>订单详情</span>
                    </a>
                </li>

                <li>
                    <a href="~/FlowerBack/UserInfo">
                        <i class="zmdi zmdi-account-circle"></i> <span>用户管理</span>
                    </a>
                </li>
            </ul>

        </div>
        <!--End sidebar-wrapper-->
        <!--Start topbar header-->
        <header style="height: 60px;
    background-color: rgba(0,0,0,.2);">
        </header>

        <div class="content-wrapper">

            <div class="" style="width:50%;margin:0px auto;">

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-title">修改商品</div>
                                <hr>
                                <form action="~/flowerback/goodset" method="post" enctype="multipart/form-data" onsubmit="return checkAdd()">
                                    <input type="hidden" name="GoodID" value="@Model.GoodID"/>
                                    <div class="form-group">
                                        <label>商品名称</label>
                                        <input type="text" class="form-control" id="GoodName" name="GoodName" value="@Model.GoodName" placeholder="请输入商品名称" autocomplete="off" maxlength="30">
                                    </div>
                                    <div class="form-group">
                                        <label>商品标签</label>
                                        <input type="text" class="form-control" id="GoodType" name="GoodType" value="@Model.GoodType" placeholder="多个标签请用 | 分割" autocomplete="off" maxlength="30">
                                    </div>
                                    <div class="form-group">
                                        <label>商品花语</label>
                                        <textarea class="form-control" id="FlowerLanguage" name="FlowerLanguage"  placeholder="请输入该商品的花语或者介绍" autocomplete="off" maxlength="100">@Model.FlowerLanguage</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>商品图片</label>
                                        <input type="file" class="form-control" name="uploadFile" id="uploadFile" accept="image/*" />
                                        <div id="image-holder">
                                            <img src="@Model.GoodMainImg"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>商品单价</label>
                                        <input type="text" class="form-control" id="GoodPrice" name="GoodPrice" value="@Model.GoodPrice" placeholder="请输入商品单价" maxlength="6">
                                    </div>
                                    <div class="form-group">
                                        <label>库存数量</label>
                                        <input type="text" class="form-control" id="GoodStock" name="GoodStock" value="@Model.GoodStock" placeholder="请输入库存数量" maxlength="6">
                                    </div>
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-light btn-round px-5"><i class="zmdi zmdi-case-check"></i> 修改商品</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div><!--End Row-->
                <!--start overlay-->
                <div class="overlay toggle-menu"></div>
                <!--end overlay-->

            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <div class="text-center">
                    Copyright © 2020
                </div>
            </div>
        </footer>

    </div>
    <script>
        $("#uploadFile").on('change', function () {

            if (typeof (FileReader) != "undefined") {
                $("#image-holder").html("");
                var image_holder = $("#image-holder");
                image_holder.empty();

                var reader = new FileReader();
                reader.onload = function (e) {
                    $("<img />", {
                        "src": e.target.result,
                        "class": "thumb-image"
                    }).appendTo(image_holder);

                }
                image_holder.show();
                reader.readAsDataURL($(this)[0].files[0]);
            } else {
                alert("你的浏览器不支持FileReader.");
            }
        });


        function checkAdd() {
            if (codeName() && codeType() && codeFL() && codePrice() && codeStock()) {
                return true;
            } else {
                return false;
            }
        }
        function codeName() {
            var name = $("#GoodName").val();
            if (name.length >= 2) {
                return true;
            } else if (name.length > 30) {
                alert('请勿超出长度范围');
                return false;
            } else {
                alert('请输入商品名称')
                return false;
            }
        }
        function codeType() {
            var name = $("#GoodType").val();
            if (name.length >= 2) {
                return true;
            } else if (name.length > 30) {
                alert('请勿超出长度范围');
                return false;
            } else {
                alert('请输入商品标签')
                return false;
            }
        }
        function codeFL() {
            var name = $("#FlowerLanguage").val();
            if (name.length >= 2) {
                return true;
            } else if (name.length > 120) {
                alert('请勿超出长度范围');
                return false;
            } else {
                alert('请输入鲜花花语')
                return false;
            }
        }
        function codeStock() {
            var name = $("#GoodStock").val();
            if (name.length >= 2) {
                return true;
            } else if (name.length > 6) {
                alert('请勿超出长度范围');
                return false;
            } else {
                alert('请输入上架数量')
                return false;
            }
        }
        function codePrice() {
            var name = $("#GoodPrice").val();
            if (name.length >= 1) {
                return true;
            } else {
                alert('请输入商品单价')
                return false;
            }
        }
    </script>
</body>
</html>
